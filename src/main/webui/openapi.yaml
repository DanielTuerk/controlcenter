---
openapi: 3.1.0
components:
  schemas:
    BlockStraight:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        gridPosition:
          $ref: "#/components/schemas/GridPosition"
        direction:
          $ref: "#/components/schemas/DIRECTION"
        lastGridPositions:
          type: array
          items:
            $ref: "#/components/schemas/GridPosition"
        rotationAngle:
          type: number
          format: double
        vertical:
          type: boolean
        blockLength:
          type: integer
          format: int32
        leftTrackBlock:
          $ref: "#/components/schemas/TrackBlock"
        middleTrackBlock:
          $ref: "#/components/schemas/TrackBlock"
        rightTrackBlock:
          $ref: "#/components/schemas/TrackBlock"
        endGridPosition:
          $ref: "#/components/schemas/GridPosition"
        allGridPositions:
          type: array
          items:
            $ref: "#/components/schemas/GridPosition"
        gridLength:
          type: integer
          format: int32
        allTrackBlocks:
          type: array
          items:
            $ref: "#/components/schemas/TrackBlock"
    BusDataConfiguration:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        bus:
          type: integer
          format: int32
        address:
          type: integer
          format: int32
        bit:
          type: integer
          format: int32
        bitState:
          type: boolean
        valid:
          type: boolean
        identifierKey:
          type: string
    Construction:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        name:
          type: string
        inAutomaticMode:
          type: boolean
    ConstructionDto:
      type: object
      properties:
        name:
          type: string
    DIRECTION:
      type: string
      enum:
        - HORIZONTAL
        - VERTICAL
    DRIVING_DIRECTION:
      type: string
      enum:
        - FORWARD
        - BACKWARD
    DRIVING_LEVEL_ADJUST_TYPE:
      type: string
      enum:
        - NONE
        - ENTER
        - EXIT
    GridPosition:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        x:
          type: integer
          format: int32
        "y":
          type: integer
          format: int32
    MODE:
      type: string
      enum:
        - "OFF"
        - MANUAL
        - AUTOMATIC
    ROUTE_RUN_STATE:
      type: string
      enum:
        - PREPARED
        - RESERVED
        - RUNNING
        - FINISHED
    RUN_STATE:
      type: string
      enum:
        - RUNNING
        - IDLE
        - PAUSED
        - STOPPED
        - SUCCESS
        - ERROR
    Route:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        name:
          type: string
        start:
          $ref: "#/components/schemas/BlockStraight"
        end:
          $ref: "#/components/schemas/TrackBlock"
        oneway:
          type: boolean
        waypoints:
          type: array
          items:
            $ref: "#/components/schemas/GridPosition"
        runState:
          $ref: "#/components/schemas/ROUTE_RUN_STATE"
        track:
          $ref: "#/components/schemas/Track"
        allTrackBlocksToDrive:
          type: array
          uniqueItems: true
          items:
            $ref: "#/components/schemas/TrackBlock"
    RouteSequence:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        position:
          type: integer
          format: int32
        route:
          $ref: "#/components/schemas/Route"
        endDelayInSeconds:
          type: integer
          format: int32
    Scenario:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        name:
          type: string
        cron:
          type: string
        train:
          $ref: "#/components/schemas/Train"
        trainDrivingDirection:
          $ref: "#/components/schemas/DRIVING_DIRECTION"
        startDrivingLevel:
          type: integer
          format: int32
        routeSequences:
          type: array
          items:
            $ref: "#/components/schemas/RouteSequence"
        stationPlatformStartId:
          type: integer
          format: int64
        stationPlatformEndId:
          type: integer
          format: int64
        runState:
          $ref: "#/components/schemas/RUN_STATE"
        mode:
          $ref: "#/components/schemas/MODE"
    Track:
      type: object
      properties:
        trackBlocks:
          type: array
          uniqueItems: true
          items:
            $ref: "#/components/schemas/TrackBlock"
        trackFunctions:
          type: array
          items:
            $ref: "#/components/schemas/BusDataConfiguration"
        gridPositions:
          type: array
          items:
            $ref: "#/components/schemas/GridPosition"
        length:
          type: integer
          format: int32
    TrackBlock:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        blockFunction:
          $ref: "#/components/schemas/BusDataConfiguration"
        construction:
          $ref: "#/components/schemas/Construction"
        name:
          type: string
        forwardTargetDrivingLevel:
          type: integer
          format: int32
        backwardTargetDrivingLevel:
          type: integer
          format: int32
        drivingLevelAdjustType:
          $ref: "#/components/schemas/DRIVING_LEVEL_ADJUST_TYPE"
        feedback:
          type: boolean
        displayValue:
          type: string
    Train:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        currentBlocks:
          type: array
          uniqueItems: true
          items:
            $ref: "#/components/schemas/TrackBlock"
        address:
          type: integer
          format: int32
        name:
          type: string
        functions:
          type: array
          uniqueItems: true
          items:
            $ref: "#/components/schemas/TrainFunction"
        drivingLevel:
          type: integer
          format: int32
        forward:
          type: boolean
        addressByte:
          type: integer
          format: int8
        presentOnTrack:
          type: boolean
    TrainDto:
      type: object
      properties:
        name:
          type: string
        address:
          type: integer
          format: int32
    TrainFunction:
      type: object
      properties:
        tempId:
          type: integer
          deprecated: true
          format: int64
        id:
          type: integer
          format: int64
        new:
          type: boolean
          deprecated: true
        internalId:
          type: integer
          deprecated: true
          format: int64
        alias:
          type: string
        configuration:
          $ref: "#/components/schemas/BusDataConfiguration"
        active:
          type: boolean
paths:
  /api/constructions:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Construction"
      summary: List All
      tags:
        - Construction Resource
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConstructionDto"
        required: true
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
      summary: Create
      tags:
        - Construction Resource
  /api/constructions/{id}:
    put:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConstructionDto"
        required: true
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
      summary: Update
      tags:
        - Construction Resource
    get:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
      summary: Get By Id
      tags:
        - Construction Resource
    delete:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
      summary: Delete
      tags:
        - Construction Resource
  /api/current-construction:
    post:
      requestBody:
        content:
          text/plain:
            schema:
              type: integer
              format: int64
        required: true
      responses:
        "200":
          description: OK
      summary: Set Current
      tags:
        - Current Construction Resource
    get:
      responses:
        "200":
          description: OK
      summary: Get Current
      tags:
        - Current Construction Resource
  /api/scenario:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Scenario"
      summary: List All
      tags:
        - Scenario Controller
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Scenario"
        required: true
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
      summary: Create
      tags:
        - Scenario Controller
  /api/scenario/{id}:
    put:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Scenario"
        required: true
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
      summary: Update
      tags:
        - Scenario Controller
    get:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
      summary: Get By Id
      tags:
        - Scenario Controller
    delete:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
      summary: Delete
      tags:
        - Scenario Controller
  /api/trains:
    get:
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Train"
      summary: List All
      tags:
        - Train Resource
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TrainDto"
        required: true
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
      summary: Create
      tags:
        - Train Resource
  /api/trains/{id}:
    put:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TrainDto"
        required: true
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
      summary: Update
      tags:
        - Train Resource
    get:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
      summary: Get By Id
      tags:
        - Train Resource
    delete:
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
      summary: Delete
      tags:
        - Train Resource
info:
  title: controlcenter API
  version: 0.3-SNAPSHOT
